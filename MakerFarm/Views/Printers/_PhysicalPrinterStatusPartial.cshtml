@{
    MakerFarm.Models.Machine M = (MakerFarm.Models.Machine)ViewData["M"];
    bool compressed = (bool)ViewData["compressed"];
}
@if(M == null){

}
else if (compressed) {
    if (User.IsInRole("Administrator") || User.IsInRole("Moderator"))
    {
        @M.Status.Split()[0]    
    }    
    if (M.CurrentTaskProgress != null)
    {
        <progress value=@M.CurrentTaskProgress.ToString() max="100">@M.CurrentTaskProgress.ToString() %</progress>
    }    
}
else
{
    if (User.IsInRole("Administrator") || User.IsInRole("Moderator"))
    {
        foreach (string S in M.Status.Split('\n'))
        {
            @S
            <br />
        }   
    }
    if (M.CurrentTaskProgress != null)
    {
        <progress value=@M.CurrentTaskProgress.ToString() max="100">@M.CurrentTaskProgress.ToString() %</progress>
    }           
}


